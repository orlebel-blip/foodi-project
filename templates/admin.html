<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    
    <meta charset="UTF-8">
    <title>× ×™×”×•×œ ××¡×¢×“×•×ª</title>
    <link rel="stylesheet" href="/static/style.css">
    <style>
        body { font-family: Arial; margin: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; background: #fff; }
        th, td { padding: 10px; border-bottom: 1px solid #ccc; text-align: right; }
        th { background-color: #f2f2f2; }
        .btn { background: #8a4b35; color: white; padding: 6px 10px; border-radius: 5px; text-decoration: none; }
        .btn:hover { background: #5a2d1f; }
        .title { font-size: 26px; margin-bottom: 20px; }
        form { background: #fafafa; padding: 15px; border-radius: 10px; margin-bottom: 30px; }
        .gps-row { display: flex; gap: 10px; margin-bottom: 10px; }
        .gps-row input { width: 145px; }
    </style>
</head>

<body>

<h1 class="title">× ×™×”×•×œ ××¡×¢×“×•×ª</h1>

<!-- ===== ×˜×•×¤×¡ ×”×•×¡×¤×ª ××¡×¢×“×” ===== -->
<form action="/admin" method="POST">

    <div class="form-group">
        <label>×©× ××¡×¢×“×”:</label>
        <input type="text" name="name" required>
    </div>

    <div class="form-group">
  <label>×¡×•×’ ××•×›×œ:</label>
  <select name="type" required>
            <option value="××™×˜×œ×§×™">
            <option value="××¡×™×™×ª×™">
            <option value="×‘×©×¨×™×">
            <option value="×”××‘×•×¨×’×¨">
            <option value="××–×¨×—×™">
            <option value="×‘×¨-××¡×¢×“×”">
            <option value="×—×œ×‘×™">

   

  </select>
</div>


    <div class="form-group">
        <label>××™×§×•× ×”××¡×¢×“×”:</label>
        <div class="gps-row">
            <input
                type="number"
                step="any"
                name="lat"
                id="lat"
                placeholder="Latitude"
                required
            >
            <input
                type="number"
                step="any"
                name="lon"
                id="lon"
                placeholder="Longitude"
                required
            >
        </div>

        <button type="button" id="locationBtn" class="btn">
            ğŸ“ ××ª×¨×™ ××•×ª×™
        </button>
    </div>

    <button type="submit" class="btn">â• ×”×•×¡×£ ××¡×¢×“×”</button>
</form>

<!-- ===== ×˜×‘×œ×ª ××¡×¢×“×•×ª ===== -->
<h2>×¨×©×™××ª ××¡×¢×“×•×ª ×‘××¢×¨×›×ª</h2>

<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>×©×</th>
            <th>×¡×•×’</th>
            <th>××¦×‘</th>
            <th>×–××Ÿ ×”××ª× ×”</th>
            <th>×¤×¢×•×œ×”</th>
        </tr>
    </thead>
    <tbody>
        {% for r in restaurants %}
        <tr>
            <td>{{ r.id }}</td>
            <td>{{ r.name }}</td>
            <td>{{ r.type }}</td>
            <td>{{ "×¤× ×•×™×”" if r.available else "×ª×¤×•×¡×”" }}</td>
            <td>{{ r.wait_time }} ×“×§×•×ª</td>
            <td>
                <form action="/admin/restaurant/{{ r.id }}/toggle" method="POST">
                    <button class="btn" type="submit">
                        {% if r.available %}×›×‘×”{% else %}×”×¤×¢×œ{% endif %}
                    </button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<p style="margin-top: 20px;">
    <a href="/" class="btn">â¬… ×—×–×¨×” ×œ×“×£ ×”×‘×™×ª</a>
</p>

<!-- ===== JS: ××™×ª×•×¨ ××™×§×•× ===== -->
<script>
    const locationBtn = document.getElementById("locationBtn");

    locationBtn.addEventListener("click", () => {
        if (!navigator.geolocation) {
            alert("×”×“×¤×“×¤×Ÿ ×œ× ×ª×•××š ×‘××™×ª×•×¨ ××™×§×•×");
            return;
        }

        navigator.geolocation.getCurrentPosition(
            (position) => {
                document.getElementById("lat").value = position.coords.latitude;
                document.getElementById("lon").value = position.coords.longitude;
            },
            () => {
                alert("×œ× × ×™×ª×Ÿ ×œ××ª×¨ ××™×§×•×. ×‘×“×§×™ ×”×¨×©××•×ª ××™×§×•× ×‘×“×¤×“×¤×Ÿ.");
            }
        );
    });
</script>

</body>
</html>
